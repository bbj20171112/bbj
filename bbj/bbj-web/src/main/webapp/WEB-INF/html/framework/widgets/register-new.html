<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>AdminLTE 2 | Registration Page</title>
<!-- 引入全局css样式 -->
<script src="../../resources/framework/css-import.js"></script>
</head>
<body class="hold-transition register-page">
	<div class="register-box">
		<div class="register-logo">
			<a href="../../index2.html"><b>BBJ</b></a>
		</div>
		<div class="register-body">

			<form id="registerForm" action="../../rl/register"
				method="post">
				<!-- <div class="form-group has-success">
				  <input type="text" class="form-control" id="inputSuccess" placeholder="Enter ...">
                  <label class="control-label" for="inputSuccess"><i class="fa fa-check"></i> Input with success</label>
                  
                </div> -->
                <div id="input1"></div>
                <div id="phone"></div>
                <div id="username"></div>
                <div id="email"></div>
            </form>
			</div>
			<!-- /.form-box -->
	</div>
	<!-- /.register-box -->
	<!-- 引入JavaScripts样式 -->
	<script src="../../resources/framework/javascript-import.js"></script>

	<script>

	/**************************start手机号输入及其验证***************************/
	(function(win, $) {
		
		//forminput
		var options={
			type: 'forminput',
			input_type: 'number', //输入类型
			input_id: 'input_number_id', //输入框id
			placeholder: '请输入手机号', //输入提示信息
			hint_id: 'label_number_id',	//提示信息——id
			hint_text: '', //提示信息
			input_state_id: 'input_number_state_id'  //输入框输入信息校正控制状态
		};
		
		//渲染box1
		bbj.renderHtml('phone', options);
	}(this, jQuery));
	
	$("#input_number_id").blur(function() {
		validatePhone(this);
	});
	
	function validatePhone(input){
		if(Utils.isEmpty(input.value)){
			updateHtml("label_number_id", "请输入手机号！");
			updateState("input_number_state_id", "has-error");
			return false;
		}
		if(Utils.isMobil(input.value)){
			
			updateHtml("label_number_id", "手机号正确");
			updateState("input_number_state_id", "has-success");
			return true;
		}else{
			updateHtml("label_number_id", "请输入正确手机号！");
			updateState("input_number_state_id", "has-error");
			return false;
		}
	}
	
	/**************************end手机号输入及其验证***************************/
	
	/**************************start用户名输入及其验证***************************/
	
	
	(function(win, $) {
		
		//forminput
		var options={
			type: 'forminput',
			input_type: 'text', //输入类型
			input_id: 'input_username_id', //输入框id
			placeholder: '请输入用户名', //输入提示信息
			hint_id: 'label_username_id',	//提示信息——id
			hint_text: '', //提示信息
			input_state_id: 'input_username_state_id'  //输入框输入信息校正控制状态
		};
		
		//渲染box1
		bbj.renderHtml('username', options);
	}(this, jQuery));
	
	$("#input_username_id").blur(function() {
		validateUsername(this);
	});
	
	function validateUsername(input){
		if(Utils.isEmpty(input.value)){
			updateHtml("label_username_id", "用户名不能为空！");
			updateState("input_username_state_id", "has-error");
			return false;
		}
		if(!Utils.isRegisterUserName(input.value)){
			updateHtml("label_username_id", "只能输入5-20个以字母开头、可带数字、“_”、“.”的字串");
			updateState("input_username_state_id", "has-error");
			return false;
		}
		if(!isNameExists(input.value)){
			updateHtml("label_username_id", "用户名可用！");
			updateState("input_username_state_id", "has-success");
			return true;
		}else{
			updateHtml("label_number_id", "用户名存在！");
			updateState("input_number_state_id", "has-error");
			return false;
		}
	}
	function isNameExists(name){
		var isExists = false;
		Utils.ajax({
			type : "GET",
			url : "../../../rl/vname",
			data : "userName=" + name,
			async: false,
			success : function(data) {
				if(data.data == "true"){
					isExists = true;
				}else{
					isExists = false;
				}
			}
		});
		return isExists;
	}
	/**************************end用户名输入及其验证***************************/
	
	function updateHtml(id, hint){
		$("#" + id).html(hint);
	}
	function updateState(id, clazz){
		$("#" + id).attr("class", "");
		$("#" + id).attr("class", "form-group " + clazz);
	}
	
	</script>
	
</body>
</html>
